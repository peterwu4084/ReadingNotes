# 防御性编程

编写完美的代码可能难以实现，但是应用一些常规的防御性技术，可以极大提高代码质量。本章将学习一些经验，帮助写出健壮的代码。

## 断言

代码是对问题解决方法的描述，在程序中的某个特定的地方，存在特定的不变量，如某个条件一定为真。如果不变量发生改变，说明代码存在缺陷。所以这些不变量是程序设计是否正确实现的依据。

断言是一个肯定的语句，用来肯定显示设计意图。

```cpp
#include <cassert>
using namespace std;

assert(...);
```
 
断言的意图是验证设计决定，造成它失败的唯一原因应该是程序逻辑有缺陷。如果某个条件不完全在程序的控制之下，那么不要对这个条件使用断言（例如依赖用户输入的条件）。特别是不应该使用断言验证函数的参数，这种情况下应该抛出logic_error异常。

## 单元测试

随着时间流逝，代码会不断地修改或重构，今天的修改可能会破坏昨天的工作。需要有一种方式来构造代码，这些代码能够经得起变化和改进带来的负面效应。这些代码就是单元测试代码。

先写单元测试是一种能够确保要编写的代码正确工作的最好方法。这种方法可以让程序员将精力集中于所要完成的任务上。先编写测试代码然后编写代码，或许能比直接编写代码更快地完成工作。

同时测试代码能够防止边界条件破坏程序，使程序代码更加健壮。

## 调试技术

